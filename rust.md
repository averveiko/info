# Rust conspect

```rust
fn gcd(mut n: u64, mut m: u64) -> u64 {
  assert!(n != 0 && m != 0);
  while  m != 0 {
    if  m < n {
      let t = m;  // local variable
      m = n;
      n = t;
    }
    m = m % n;
  }
  n
}

#[test] // это атрибут
fn test_gcd() {
  assert_eq!(gcd(14, 15), 1);
  assert_eq!(gcd(2 * 3 * 5 * 11 * 17, 3 * 7 * 11 * 13 * 19), 3 * 11);
}
```

```rust
// i32 – 32-разрядное целое со знаком, u8 – 8-разрядное целое без знака
// Типы isize и usize соответствуют целым размерам указателя со знаком и без знака: 32 разряда на 32-разрядной платформе и 64 – на 64-разрядной.
// f32, f64 aka float и double в C и C++

// любой блок, заключенный в фигурные скобки, может выступать в роли выражения:
{
  x.cos()
}

u64::from_str(&arg).expect("error parsing argument") // Распарсить, либо вернуть ошибку

(char,u8,i32) // Кортеж, допускаются различные типы ('%',0x7f,-1)

() // «Единичный» (пустой) тип

// Структура с именованными полями S {x:120.0,y:209.0}
struct S {
  x:f32,
  y:f32
}

// Кортежеподобная структура T(120,'X')
struct T (i32,char);

// Структура, подобная единичному типу, не имеет полей
struct E;

// Перечисление, алгебраический тип данных Attend::Late(5),Attend::OnTime
enum Attend {
  OnTime,
  Late(u32)
}

// Бокс – владеет указателем на значение в куче Box::new(Late(15))
Box<Attend>

// Разделяемая и изменяемая ссылка – не владеющие памятью указатели, которые не должны существовать дольше, чем объекты, на которые указывают &s.y, &mut v
&i32, &mut i32

// Строка в кодировке UTF-8, размер динамически изменяется "ラーメン:ramen".to_string()
String

// Ссылка на str, не владеющий памятью указатель на текст в кодировке UTF-8 "そば:soba", &s[0..12]
&str

// Массив фиксированной длины, все элементы одного типа [1.0, 0.0, 0.0, 1.0], [b' '; 256]
[f64;4], [u8;256]

// Вектор переменной длины, все элементы одного типа vec![0.367, 2.718, 7.389]
Vec<f64>

// Ссылка на срез: ссылка на участок массива, состоящая из указателя и длины &v[10..20], &mut a[..]
&[u8], &mut[u8]

// Объект характеристики, ссылка на любое значение, реализующее заданный набор методов value as &Any, &mut file as &mut Read
&Any, &mutRead

// Указатель на функцию i32::saturating_add
fn(&str, usize) -> isize

// Замыкание |a,b| a*a + b*b
(у замыкания нет явной формы)

// Целые числа имеют методы
assert_eq!(2u16.pow(4), 16);            //возведение в степень
assert_eq!((-4i32).abs(), 4);           //абсолютная величина
assert_eq!(0b101101u8.count_ones(), 4); //счетчик единиц

// Типы с плавающей точкой также имеют методы
assert_eq!(5f32.sqrt() * 5f32.sqrt(), 5.); //точно 5.0, в соответствии с IEEE
assert_eq!(-1.01f64.floor(), -1.0);
assert!((-1. / std::f32::INFINITY).is_sign_negative());

// Явное преобразование типов
i as f64
x as i32
```



